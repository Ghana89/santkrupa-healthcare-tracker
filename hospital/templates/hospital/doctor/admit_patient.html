{% extends "hospital/base.html" %}

{% block title %}Admit Patient - SantKrupa Hospital{% endblock %}

{% block content %}
<div class="container" style="max-width: 700px; margin: 0 auto; padding: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h1>üè• Admit Patient</h1>
        <a href="{% url 'doctor_dashboard' clinic_slug=clinic.slug %}" class="btn" style="background-color: #666;">
            ‚Üê Back
        </a>
    </div>

    <div class="card" style="margin-bottom: 20px; background-color: #e3f2fd; border-left: 4px solid #2196f3;">
        <h3 style="margin: 0 0 10px 0; color: #1976d2;">Patient Information</h3>
        <p style="margin: 0; font-size: 16px; font-weight: bold;">{{ patient.patient_name }}</p>
        <p style="margin: 5px 0; color: #666;">Patient ID: <strong>{{ patient.patient_id }}</strong></p>
        <p style="margin: 5px 0; color: #666;">Age: <strong>{{ patient.age }}</strong> years | Phone: <strong>{{ patient.phone_number }}</strong></p>
    </div>

    {% if messages %}
        {% for message in messages %}
            <div class="alert-{% if message.tags %}{{ message.tags }}{% else %}success{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="post" class="card">
        {% csrf_token %}
        
        <!-- Admission Type -->
        <div class="form-group">
            <label for="admission_type" style="display: block; font-weight: bold; margin-bottom: 8px;">*Admission Type</label>
            <select name="admission_type" id="admission_type" required 
                    style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
                <option value="">-- Select Admission Type --</option>
                {% for value, label in admission_types %}
                    <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
            </select>
            <small style="color: #666;">General Ward, ICU, Emergency, etc.</small>
        </div>

        <!-- Bed Number -->
        <div class="form-group">
            <label for="bed_number" style="display: block; font-weight: bold; margin-bottom: 8px;">Bed Number</label>
            <input type="text" name="bed_number" id="bed_number" 
                   placeholder="e.g., ICU-5, Ward-A-12, ED-01"
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box;">
            <small style="color: #666;">Optional: Bed assignment</small>
        </div>

        <!-- Room Number -->
        <div class="form-group">
            <label for="room_number" style="display: block; font-weight: bold; margin-bottom: 8px;">Room Number</label>
            <input type="text" name="room_number" id="room_number" 
                   placeholder="e.g., 205, 301"
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box;">
            <small style="color: #666;">Optional: Room assignment</small>
        </div>

        <!-- Reason for Admission -->
        <div class="form-group">
            <label for="reason_for_admission" style="display: block; font-weight: bold; margin-bottom: 8px;">*Reason for Admission</label>
            <textarea name="reason_for_admission" id="reason_for_admission" required rows="3"
                      placeholder="Chief complaint, symptoms, and reason for hospital admission..."
                      style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box; font-family: inherit;"></textarea>
            <small style="color: #666;">Describe the main reason and symptoms</small>
        </div>

        <!-- Medical History -->
        <div class="form-group">
            <label for="medical_history" style="display: block; font-weight: bold; margin-bottom: 8px;">Medical History</label>
            <textarea name="medical_history" id="medical_history" rows="3"
                      placeholder="Past medical conditions, chronic diseases, previous surgeries, ongoing treatments, etc."
                      style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box; font-family: inherit;"></textarea>
            <small style="color: #666;">Relevant past medical history</small>
        </div>

        <!-- Allergies -->
        <div class="form-group">
            <label for="allergies" style="display: block; font-weight: bold; margin-bottom: 8px;">‚ö†Ô∏è Allergies</label>
            <textarea name="allergies" id="allergies" rows="2"
                      placeholder="Drug allergies, food allergies, environmental allergies, etc. (IMPORTANT!)"
                      style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box; font-family: inherit; background-color: #fff3cd;"></textarea>
            <small style="color: #d32f2f; font-weight: bold;">‚ö†Ô∏è This information is critical for patient safety</small>
        </div>

        <!-- Submit Buttons -->
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button type="submit" class="btn" style="flex: 1;">‚úÖ Admit Patient</button>
            <a href="{% url 'doctor_dashboard' clinic_slug=clinic.slug %}" class="btn" style="flex: 1; text-align: center; background-color: #999; border-color: #999;">Cancel</a>
        </div>
    </form>

    <!-- Info Box -->
    <div class="card" style="margin-top: 20px; background-color: #f5f5f5; border-left: 4px solid #999;">
        <h4 style="margin: 0 0 10px 0;">‚ÑπÔ∏è Note</h4>
        <p style="margin: 0; color: #666; font-size: 13px;">
            After admission, you can add treatment records, injections, saline infusions, and other procedures 
            from the admission details page. You can also update the admission status and discharge the patient when ready.
        </p>
    </div>
</div>

<style>
    .btn {
        background-color: #667eea;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
        font-size: 14px;
        transition: background-color 0.3s ease;
        border: 1px solid #667eea;
    }
    
    .btn:hover {
        background-color: #5a67d8;
        border-color: #5a67d8;
    }
    
    .card {
        background: white;
        border-radius: 8px;
        border: 1px solid #e0e0e0;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
        box-sizing: border-box;
    }
    
    .alert-success {
        background-color: #d4edda;
        color: #155724;
        padding: 12px;
        border-radius: 4px;
        margin-bottom: 15px;
    }
    
    h1, h3, h4 {
        color: #333;
        margin: 0 0 15px 0;
    }
    
    .container {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }
</style>
{% endblock %}
