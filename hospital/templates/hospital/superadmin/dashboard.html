{% extends "hospital/base.html" %}

{% block title %}Superadmin Dashboard - SantKrupa Hospital{% endblock %}

{% block content %}
<div class="container" style="margin-top: 30px;">
    <h1 style="color: #1e3c72; margin-bottom: 30px;">üîë Platform Superadmin Dashboard</h1>

    <!-- Statistics Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h3 style="margin: 0; font-size: 14px; opacity: 0.9;">Total Clinics</h3>
            <p style="margin: 10px 0 0 0; font-size: 32px; font-weight: bold;">{{ total_clinics }}</p>
        </div>
        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h3 style="margin: 0; font-size: 14px; opacity: 0.9;">Active Clinics</h3>
            <p style="margin: 10px 0 0 0; font-size: 32px; font-weight: bold;">{{ active_clinics }}</p>
        </div>
        <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h3 style="margin: 0; font-size: 14px; opacity: 0.9;">Inactive Clinics</h3>
            <p style="margin: 10px 0 0 0; font-size: 32px; font-weight: bold;">{{ inactive_clinics }}</p>
        </div>
    </div>

    <!-- Clinics Management -->
    <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h2 style="color: #1e3c72; margin-top: 0; display: flex; align-items: center; gap: 10px;">
            <span>üè• All Clinics</span>
            <span style="font-size: 14px; color: #666;">{{ total_clinics }} clinic(s)</span>
        </h2>

        {% if messages %}
            {% for message in messages %}
                <div style="padding: 12px 15px; margin-bottom: 15px; border-radius: 4px; background-color: #d4edda; color: #155724; border-left: 4px solid #28a745;">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        {% if clinics %}
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                    <thead>
                        <tr style="background-color: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                            <th style="padding: 12px; text-align: left; color: #333; font-weight: 600;">Clinic Name</th>
                            <th style="padding: 12px; text-align: left; color: #333; font-weight: 600;">Slug</th>
                            <th style="padding: 12px; text-align: left; color: #333; font-weight: 600;">Email</th>
                            <th style="padding: 12px; text-align: left; color: #333; font-weight: 600;">Status</th>
                            <th style="padding: 12px; text-align: left; color: #333; font-weight: 600;">Created</th>
                            <th style="padding: 12px; text-align: center; color: #333; font-weight: 600;">View Data</th>
                            <th style="padding: 12px; text-align: center; color: #333; font-weight: 600;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for clinic in clinics %}
                        <tr style="border-bottom: 1px solid #dee2e6; transition: background-color 0.2s;">
                            <td style="padding: 12px; color: #333;"><strong>{{ clinic.name }}</strong></td>
                            <td style="padding: 12px; color: #666;">{{ clinic.slug }}</td>
                            <td style="padding: 12px; color: #666;">{{ clinic.email|default:"N/A" }}</td>
                            <td style="padding: 12px;">
                                {% if clinic.is_active %}
                                    <span style="background-color: #d4edda; color: #155724; padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 600;">Active</span>
                                {% else %}
                                    <span style="background-color: #f8d7da; color: #721c24; padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 600;">Inactive</span>
                                {% endif %}
                            </td>
                            <td style="padding: 12px; color: #666; font-size: 13px;">{{ clinic.created_at|date:"M d, Y" }}</td>
                            <td style="padding: 12px; text-align: center;">
                                <div style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;">
                                    <a href="{% url 'superadmin_clinic_patients' clinic.id %}" style="background-color: #17a2b8; color: white; padding: 5px 10px; border-radius: 4px; text-decoration: none; font-size: 12px; font-weight: 600; white-space: nowrap;">
                                        üë• Patients
                                    </a>
                                    <a href="{% url 'superadmin_clinic_doctors' clinic.id %}" style="background-color: #28a745; color: white; padding: 5px 10px; border-radius: 4px; text-decoration: none; font-size: 12px; font-weight: 600; white-space: nowrap;">
                                        üë®‚Äç‚öïÔ∏è Doctors
                                    </a>
                                    <a href="{% url 'superadmin_clinic_prescriptions' clinic.id %}" style="background-color: #ffc107; color: #333; padding: 5px 10px; border-radius: 4px; text-decoration: none; font-size: 12px; font-weight: 600; white-space: nowrap;">
                                        üìã Prescriptions
                                    </a>
                                </div>
                            </td>
                            <td style="padding: 12px; text-align: center;">
                                <a href="{% url 'delete_clinic' clinic.id %}" style="background-color: #dc3545; color: white; padding: 6px 12px; border-radius: 4px; text-decoration: none; font-size: 13px; font-weight: 600; display: inline-block; transition: background-color 0.2s;">
                                    Delete
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div style="background-color: #e7f3ff; color: #0066cc; padding: 15px; border-radius: 4px; margin-top: 15px;">
                No clinics available yet. <a href="{% url 'register_clinic' %}" style="color: #0066cc; font-weight: 600;">Register a clinic</a>
            </div>
        {% endif %}
    </div>

    <!-- Action Buttons -->
    <div style="margin-top: 30px; text-align: center;">
        <a href="{% url 'register_clinic' %}" style="background-color: #28a745; color: white; padding: 12px 25px; border-radius: 4px; text-decoration: none; font-weight: 600; display: inline-block; margin-right: 10px; transition: background-color 0.2s;">
            + Register New Clinic
        </a>
        <a href="{% url 'homepage' %}" style="background-color: #6c757d; color: white; padding: 12px 25px; border-radius: 4px; text-decoration: none; font-weight: 600; display: inline-block; transition: background-color 0.2s;">
            Back to Home
        </a>
    </div>
</div>

<style>
    a:hover {
        opacity: 0.9;
    }
    
    table tr:hover {
        background-color: #f8f9fa;
    }
</style>
{% endblock %}
